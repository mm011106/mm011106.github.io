<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: oct2 | MQTT and ...]]></title>
  <link href="http://mm011106.github.io/blog/categories/oct2/atom.xml" rel="self"/>
  <link href="http://mm011106.github.io/"/>
  <updated>2016-01-23T20:03:00+09:00</updated>
  <id>http://mm011106.github.io/</id>
  <author>
    <name><![CDATA[Masakazu Miyamoto]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress+OCT2のちょっとした修正]]></title>
    <link href="http://mm011106.github.io/blog/2014/12/02/minor-adjustment/"/>
    <updated>2014-12-02T20:28:23+09:00</updated>
    <id>http://mm011106.github.io/blog/2014/12/02/minor-adjustment</id>
    <content type="html"><![CDATA[<p>今まで、ブログのポスト日時表示がうまく行かなかったので色々と調べまわっていました。しかし、web上ではなかなか情報がなく、半分諦めていました。ふと、昔はどうだったかなあ、と気になってoctopressをインストールしたばかりの時に試しに使っていたテーマで生成したHTMLコードを見てみたところ、ブログページに日付が入っていることを発見。なら、この部分だけ持ってきて入れなおしてみるかな、とやってみたところうまく行きました！</p>

<!-- more -->


<p>このページはOCT2というテーマを使っているのですが、そのソース<code>source/_include/date.html</code>では日付が代入されている（と思われる）変数が<code>post.date_formatted</code>となっているのですが、これではうまく表示できないようです。ポスト日時が表示できていた昔のソースではここが<code>post.date</code>になっていました。<br/>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>{% capture date %}{{ page.date }}{{ post.date }}{% endcapture %}
</span><span class='line'>{% capture date_text %}{{ page.date_text }}{{ post.date_text }}{% endcapture %}
</span><span class='line'>{% capture has_date %}{{ date | size }}{% endcapture %}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>{% capture updated %}{{ page.updated }}{{ post.updated }}{% endcapture %}
</span><span class='line'>{% capture updated_text %}{{ page.updated_text }}{{ post.updated_text }}{% endcapture %}
</span><span class='line'>{% capture was_updated %}{{ updated | size }}{% endcapture %}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>{% if has_date != &lsquo;0&rsquo; %}
</span><span class='line'>  {% capture time %}&lt;time datetime="{{ date | datetime | date_to_xmlschema }}" pubdate{% if updated %} data-updated="true"{% endif %}>{{ date_text }}&lt;/time>{% endcapture %}
</span><span class='line'>{% endif %}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>{% if was_updated != &lsquo;0&rsquo; %}
</span><span class='line'>  {% capture updated %}&lt;time datetime="{{ updated | datetime | date_to_xmlschema }}" class="updated">Updated {{ updated_text }}&lt;/time>{% endcapture %}
</span><span class='line'>{% else %}{% assign updated = false %}{% endif %}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure>
中身がわからないまま使っているので、この変数がどこでどのように定義されているのかいまいちわかっていませんが、<code>post.date_formatted</code>にはうまく値が入っていないようです。あるいは、<code>formatted</code>にするために何か他のモジュールのようなものがいるのかもしれません。<br/>
やったことは、もともとある<code>octopress/_include/date.html</code>のファイル名を変更してオリジナルを保存。次に、うまく時間表示ができていた以前のテーマの同じテンプレートをコピー。それだけ。</p>

<p>あまり深く詮索せず、とりえあず表示できたので良しとします。日付のフォーマットも西洋風ですが、まああまり違和感ないのでこのまま。</p>
]]></content>
  </entry>
  
</feed>
